make --dry-run --always-make --keep-going --print-directory
make: Entering directory '/home/ylh/桌面/hello-libbpfgo/09-sock-statistic'
make -C . main
make[1]: Entering directory '/home/ylh/桌面/hello-libbpfgo/09-sock-statistic'
echo "INFO: updating submodule 'libbpf'"
/usr/bin/git submodule update --init --recursive
mkdir -p ./output/libbpf
CC="gcc" CFLAGS="-ggdb -gdwarf -O2 -Wall -fpie -Wno-unused-variable -Wno-unused-function" LD_FLAGS="" \
   make -C /home/ylh/桌面/hello-libbpfgo/libbpf/src \
	BUILD_STATIC_ONLY=1 \
	OBJDIR=/home/ylh/桌面/hello-libbpfgo/09-sock-statistic/output/libbpf \
	DESTDIR=/home/ylh/桌面/hello-libbpfgo/09-sock-statistic/output \
	INCLUDEDIR= LIBDIR= UAPIDIR= prefix= libdir= install
make[2]: Entering directory '/home/ylh/桌面/hello-libbpfgo/libbpf/src'
 
printf '  %-8s %s%s\n' "MKDIR" "/home/ylh/桌面/hello-libbpfgo/09-sock-statistic/output/libbpf/staticobjs" "";
mkdir -p /home/ylh/桌面/hello-libbpfgo/09-sock-statistic/output/libbpf/staticobjs
printf '  %-8s %s%s\n' "CC" "/home/ylh/桌面/hello-libbpfgo/09-sock-statistic/output/libbpf/staticobjs/bpf.o" "";
gcc -I. -I../include -I../include/uapi -ggdb -gdwarf -O2 -Wall -fpie -Wno-unused-variable -Wno-unused-function -D_LARGEFILE64_SOURCE -D_FILE_OFFSET_BITS=64  -c bpf.c -o /home/ylh/桌面/hello-libbpfgo/09-sock-statistic/output/libbpf/staticobjs/bpf.o
printf '  %-8s %s%s\n' "CC" "/home/ylh/桌面/hello-libbpfgo/09-sock-statistic/output/libbpf/staticobjs/btf.o" "";
gcc -I. -I../include -I../include/uapi -ggdb -gdwarf -O2 -Wall -fpie -Wno-unused-variable -Wno-unused-function -D_LARGEFILE64_SOURCE -D_FILE_OFFSET_BITS=64  -c btf.c -o /home/ylh/桌面/hello-libbpfgo/09-sock-statistic/output/libbpf/staticobjs/btf.o
printf '  %-8s %s%s\n' "CC" "/home/ylh/桌面/hello-libbpfgo/09-sock-statistic/output/libbpf/staticobjs/libbpf.o" "";
gcc -I. -I../include -I../include/uapi -ggdb -gdwarf -O2 -Wall -fpie -Wno-unused-variable -Wno-unused-function -D_LARGEFILE64_SOURCE -D_FILE_OFFSET_BITS=64  -c libbpf.c -o /home/ylh/桌面/hello-libbpfgo/09-sock-statistic/output/libbpf/staticobjs/libbpf.o
printf '  %-8s %s%s\n' "CC" "/home/ylh/桌面/hello-libbpfgo/09-sock-statistic/output/libbpf/staticobjs/libbpf_errno.o" "";
gcc -I. -I../include -I../include/uapi -ggdb -gdwarf -O2 -Wall -fpie -Wno-unused-variable -Wno-unused-function -D_LARGEFILE64_SOURCE -D_FILE_OFFSET_BITS=64  -c libbpf_errno.c -o /home/ylh/桌面/hello-libbpfgo/09-sock-statistic/output/libbpf/staticobjs/libbpf_errno.o
printf '  %-8s %s%s\n' "CC" "/home/ylh/桌面/hello-libbpfgo/09-sock-statistic/output/libbpf/staticobjs/netlink.o" "";
gcc -I. -I../include -I../include/uapi -ggdb -gdwarf -O2 -Wall -fpie -Wno-unused-variable -Wno-unused-function -D_LARGEFILE64_SOURCE -D_FILE_OFFSET_BITS=64  -c netlink.c -o /home/ylh/桌面/hello-libbpfgo/09-sock-statistic/output/libbpf/staticobjs/netlink.o
printf '  %-8s %s%s\n' "CC" "/home/ylh/桌面/hello-libbpfgo/09-sock-statistic/output/libbpf/staticobjs/nlattr.o" "";
gcc -I. -I../include -I../include/uapi -ggdb -gdwarf -O2 -Wall -fpie -Wno-unused-variable -Wno-unused-function -D_LARGEFILE64_SOURCE -D_FILE_OFFSET_BITS=64  -c nlattr.c -o /home/ylh/桌面/hello-libbpfgo/09-sock-statistic/output/libbpf/staticobjs/nlattr.o
printf '  %-8s %s%s\n' "CC" "/home/ylh/桌面/hello-libbpfgo/09-sock-statistic/output/libbpf/staticobjs/str_error.o" "";
gcc -I. -I../include -I../include/uapi -ggdb -gdwarf -O2 -Wall -fpie -Wno-unused-variable -Wno-unused-function -D_LARGEFILE64_SOURCE -D_FILE_OFFSET_BITS=64  -c str_error.c -o /home/ylh/桌面/hello-libbpfgo/09-sock-statistic/output/libbpf/staticobjs/str_error.o
printf '  %-8s %s%s\n' "CC" "/home/ylh/桌面/hello-libbpfgo/09-sock-statistic/output/libbpf/staticobjs/libbpf_probes.o" "";
gcc -I. -I../include -I../include/uapi -ggdb -gdwarf -O2 -Wall -fpie -Wno-unused-variable -Wno-unused-function -D_LARGEFILE64_SOURCE -D_FILE_OFFSET_BITS=64  -c libbpf_probes.c -o /home/ylh/桌面/hello-libbpfgo/09-sock-statistic/output/libbpf/staticobjs/libbpf_probes.o
printf '  %-8s %s%s\n' "CC" "/home/ylh/桌面/hello-libbpfgo/09-sock-statistic/output/libbpf/staticobjs/bpf_prog_linfo.o" "";
gcc -I. -I../include -I../include/uapi -ggdb -gdwarf -O2 -Wall -fpie -Wno-unused-variable -Wno-unused-function -D_LARGEFILE64_SOURCE -D_FILE_OFFSET_BITS=64  -c bpf_prog_linfo.c -o /home/ylh/桌面/hello-libbpfgo/09-sock-statistic/output/libbpf/staticobjs/bpf_prog_linfo.o
printf '  %-8s %s%s\n' "CC" "/home/ylh/桌面/hello-libbpfgo/09-sock-statistic/output/libbpf/staticobjs/xsk.o" "";
gcc -I. -I../include -I../include/uapi -ggdb -gdwarf -O2 -Wall -fpie -Wno-unused-variable -Wno-unused-function -D_LARGEFILE64_SOURCE -D_FILE_OFFSET_BITS=64  -c xsk.c -o /home/ylh/桌面/hello-libbpfgo/09-sock-statistic/output/libbpf/staticobjs/xsk.o
printf '  %-8s %s%s\n' "CC" "/home/ylh/桌面/hello-libbpfgo/09-sock-statistic/output/libbpf/staticobjs/btf_dump.o" "";
gcc -I. -I../include -I../include/uapi -ggdb -gdwarf -O2 -Wall -fpie -Wno-unused-variable -Wno-unused-function -D_LARGEFILE64_SOURCE -D_FILE_OFFSET_BITS=64  -c btf_dump.c -o /home/ylh/桌面/hello-libbpfgo/09-sock-statistic/output/libbpf/staticobjs/btf_dump.o
printf '  %-8s %s%s\n' "CC" "/home/ylh/桌面/hello-libbpfgo/09-sock-statistic/output/libbpf/staticobjs/hashmap.o" "";
gcc -I. -I../include -I../include/uapi -ggdb -gdwarf -O2 -Wall -fpie -Wno-unused-variable -Wno-unused-function -D_LARGEFILE64_SOURCE -D_FILE_OFFSET_BITS=64  -c hashmap.c -o /home/ylh/桌面/hello-libbpfgo/09-sock-statistic/output/libbpf/staticobjs/hashmap.o
printf '  %-8s %s%s\n' "CC" "/home/ylh/桌面/hello-libbpfgo/09-sock-statistic/output/libbpf/staticobjs/ringbuf.o" "";
gcc -I. -I../include -I../include/uapi -ggdb -gdwarf -O2 -Wall -fpie -Wno-unused-variable -Wno-unused-function -D_LARGEFILE64_SOURCE -D_FILE_OFFSET_BITS=64  -c ringbuf.c -o /home/ylh/桌面/hello-libbpfgo/09-sock-statistic/output/libbpf/staticobjs/ringbuf.o
printf '  %-8s %s%s\n' "CC" "/home/ylh/桌面/hello-libbpfgo/09-sock-statistic/output/libbpf/staticobjs/strset.o" "";
gcc -I. -I../include -I../include/uapi -ggdb -gdwarf -O2 -Wall -fpie -Wno-unused-variable -Wno-unused-function -D_LARGEFILE64_SOURCE -D_FILE_OFFSET_BITS=64  -c strset.c -o /home/ylh/桌面/hello-libbpfgo/09-sock-statistic/output/libbpf/staticobjs/strset.o
printf '  %-8s %s%s\n' "CC" "/home/ylh/桌面/hello-libbpfgo/09-sock-statistic/output/libbpf/staticobjs/linker.o" "";
gcc -I. -I../include -I../include/uapi -ggdb -gdwarf -O2 -Wall -fpie -Wno-unused-variable -Wno-unused-function -D_LARGEFILE64_SOURCE -D_FILE_OFFSET_BITS=64  -c linker.c -o /home/ylh/桌面/hello-libbpfgo/09-sock-statistic/output/libbpf/staticobjs/linker.o
printf '  %-8s %s%s\n' "CC" "/home/ylh/桌面/hello-libbpfgo/09-sock-statistic/output/libbpf/staticobjs/gen_loader.o" "";
gcc -I. -I../include -I../include/uapi -ggdb -gdwarf -O2 -Wall -fpie -Wno-unused-variable -Wno-unused-function -D_LARGEFILE64_SOURCE -D_FILE_OFFSET_BITS=64  -c gen_loader.c -o /home/ylh/桌面/hello-libbpfgo/09-sock-statistic/output/libbpf/staticobjs/gen_loader.o
printf '  %-8s %s%s\n' "CC" "/home/ylh/桌面/hello-libbpfgo/09-sock-statistic/output/libbpf/staticobjs/relo_core.o" "";
gcc -I. -I../include -I../include/uapi -ggdb -gdwarf -O2 -Wall -fpie -Wno-unused-variable -Wno-unused-function -D_LARGEFILE64_SOURCE -D_FILE_OFFSET_BITS=64  -c relo_core.c -o /home/ylh/桌面/hello-libbpfgo/09-sock-statistic/output/libbpf/staticobjs/relo_core.o
printf '  %-8s %s%s\n' "AR" "/home/ylh/桌面/hello-libbpfgo/09-sock-statistic/output/libbpf/libbpf.a" "";
ar rcs /home/ylh/桌面/hello-libbpfgo/09-sock-statistic/output/libbpf/libbpf.a /home/ylh/桌面/hello-libbpfgo/09-sock-statistic/output/libbpf/staticobjs/bpf.o /home/ylh/桌面/hello-libbpfgo/09-sock-statistic/output/libbpf/staticobjs/btf.o /home/ylh/桌面/hello-libbpfgo/09-sock-statistic/output/libbpf/staticobjs/libbpf.o /home/ylh/桌面/hello-libbpfgo/09-sock-statistic/output/libbpf/staticobjs/libbpf_errno.o /home/ylh/桌面/hello-libbpfgo/09-sock-statistic/output/libbpf/staticobjs/netlink.o /home/ylh/桌面/hello-libbpfgo/09-sock-statistic/output/libbpf/staticobjs/nlattr.o /home/ylh/桌面/hello-libbpfgo/09-sock-statistic/output/libbpf/staticobjs/str_error.o /home/ylh/桌面/hello-libbpfgo/09-sock-statistic/output/libbpf/staticobjs/libbpf_probes.o /home/ylh/桌面/hello-libbpfgo/09-sock-statistic/output/libbpf/staticobjs/bpf_prog_linfo.o /home/ylh/桌面/hello-libbpfgo/09-sock-statistic/output/libbpf/staticobjs/xsk.o /home/ylh/桌面/hello-libbpfgo/09-sock-statistic/output/libbpf/staticobjs/btf_dump.o /home/ylh/桌面/hello-libbpfgo/09-sock-statistic/output/libbpf/staticobjs/hashmap.o /home/ylh/桌面/hello-libbpfgo/09-sock-statistic/output/libbpf/staticobjs/ringbuf.o /home/ylh/桌面/hello-libbpfgo/09-sock-statistic/output/libbpf/staticobjs/strset.o /home/ylh/桌面/hello-libbpfgo/09-sock-statistic/output/libbpf/staticobjs/linker.o /home/ylh/桌面/hello-libbpfgo/09-sock-statistic/output/libbpf/staticobjs/gen_loader.o /home/ylh/桌面/hello-libbpfgo/09-sock-statistic/output/libbpf/staticobjs/relo_core.o
sed -e "s|@PREFIX@|/usr|" \
	-e "s|@LIBDIR@|$\{prefix\}/lib64|" \
	-e "s|@VERSION@|0.7.0|" \
	< libbpf.pc.template > /home/ylh/桌面/hello-libbpfgo/09-sock-statistic/output/libbpf/libbpf.pc
printf '  %-8s %s%s\n' "INSTALL" "bpf.h libbpf.h btf.h libbpf_common.h libbpf_legacy.h xsk.h bpf_helpers.h bpf_helper_defs.h bpf_tracing.h bpf_endian.h bpf_core_read.h skel_internal.h libbpf_version.h" "";
if [ ! -d '/home/ylh/桌面/hello-libbpfgo/09-sock-statistic/output/bpf' ]; then install -d -m 755 '/home/ylh/桌面/hello-libbpfgo/09-sock-statistic/output/bpf'; fi;
install -m 644 bpf.h libbpf.h btf.h libbpf_common.h libbpf_legacy.h xsk.h bpf_helpers.h bpf_helper_defs.h bpf_tracing.h bpf_endian.h bpf_core_read.h skel_internal.h libbpf_version.h '/home/ylh/桌面/hello-libbpfgo/09-sock-statistic/output/bpf'
printf '  %-8s %s%s\n' "INSTALL" "/home/ylh/桌面/hello-libbpfgo/09-sock-statistic/output/libbpf/libbpf.pc" "";
if [ ! -d '/home/ylh/桌面/hello-libbpfgo/09-sock-statistic/output/pkgconfig' ]; then install -d -m 755 '/home/ylh/桌面/hello-libbpfgo/09-sock-statistic/output/pkgconfig'; fi;
install -m 644 /home/ylh/桌面/hello-libbpfgo/09-sock-statistic/output/libbpf/libbpf.pc '/home/ylh/桌面/hello-libbpfgo/09-sock-statistic/output/pkgconfig'
printf '  %-8s %s%s\n' "INSTALL" "/home/ylh/桌面/hello-libbpfgo/09-sock-statistic/output/libbpf/libbpf.a " "";
if [ ! -d '/home/ylh/桌面/hello-libbpfgo/09-sock-statistic/output' ]; then install -d -m 755 '/home/ylh/桌面/hello-libbpfgo/09-sock-statistic/output'; fi;
cp -fR /home/ylh/桌面/hello-libbpfgo/09-sock-statistic/output/libbpf/libbpf.a  '/home/ylh/桌面/hello-libbpfgo/09-sock-statistic/output'
make[2]: Leaving directory '/home/ylh/桌面/hello-libbpfgo/libbpf/src'
mkdir -p ./output
 
if [ -f /usr/lib/debug/boot/vmlinux-5.15.0-30-generic ]; then \
	echo "INFO: found dbg kernel, generating vmlinux.h from /usr/lib/debug/boot/vmlinux-5.15.0-30-generic"; \
	/usr/local/sbin/bpftool btf dump file /usr/lib/debug/boot/vmlinux-5.15.0-30-generic format c > vmlinux.h; \
fi
if [ ! -f /sys/kernel/btf/vmlinux ] && [ ! -f /usr/lib/debug/boot/vmlinux-5.15.0-30-generic ]; then \
	echo "ERROR: kernel does not seem to support BTF"; \
	exit 1; \
fi
if [ ! -f vmlinux.h ]; then \
	echo "INFO: generating vmlinux.h from /sys/kernel/btf/vmlinux"; \
	/usr/local/sbin/bpftool btf dump file /sys/kernel/btf/vmlinux format c > vmlinux.h; \
fi
clang -ggdb -gdwarf -O2 -Wall -fpie -Wno-unused-variable -Wno-unused-function -target bpf -D__TARGET_ARCH_x86 -I. -I./output -c main.bpf.c -o main.bpf.o
CC=clang \
	CGO_CFLAGS="-I/home/ylh/桌面/hello-libbpfgo/09-sock-statistic/output" \
	CGO_LDFLAGS="-lelf -lz /home/ylh/桌面/hello-libbpfgo/09-sock-statistic/output/libbpf.a" \
                GOARCH=amd64 \
                go build \
                -tags netgo -ldflags '-w -extldflags "-static"' \
                -o main ./main.go
make[1]: Leaving directory '/home/ylh/桌面/hello-libbpfgo/09-sock-statistic'
make: Leaving directory '/home/ylh/桌面/hello-libbpfgo/09-sock-statistic'
 
